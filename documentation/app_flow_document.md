# Application Flow for the Brainstorm Dashboard

## Onboarding and Sign-In/Sign-Up
When a new visitor lands on the application’s homepage, they are greeted by a simple welcome screen offering options to either sign in or sign up. Choosing to sign up opens a form that requests an email address and a password, which the user must confirm before submission. Upon sending the sign-up request, the system creates a new account, issues a session token, and immediately redirects the user into the protected dashboard. Returning users select the sign-in option and enter their registered email and password. Successful authentication leads them to the dashboard interface, while any error—such as incorrect credentials—displays an inline message prompting correction. If a user forgets their password, they click a “Forgot Password” link, enter their email address on the next screen, and receive an email containing a password reset link. Following the link allows them to choose a new password and then return to the sign-in form. Signing out is always available via a logout button in the site header; clicking it clears the session and sends the user back to the welcome screen.

## Main Dashboard or Home Page
Once signed in, participants arrive at the default participant dashboard view located at `/dashboard/home`. The layout features a top header bar displaying the application name, the active clock in UTC+7, and the user’s avatar. Along the left side, a vertical navigation menu lets participants switch between Home, Transactions, Portfolio, and Settings. The main area shows a news feed table on the left and a dynamic stock chart on the right. Admin users instead see an admin dashboard at `/admin`, which follows the same structural pattern but offers menu links to Participants, Companies, News, Transactions, and Settings. In both roles, selecting any menu option pushes the corresponding page into the main content panel while preserving the header and sidebar.

## Detailed Feature Flows and Page Transitions
Participants begin their experience on the Home page, where an SWR hook fetches the latest news and company summaries from `/api/news` and `/api/companies`. News items appear in a scrollable table. Clicking on a company row highlights its ticker and updates the chart component with historical price data. The chart is rendered using Chart.js and reacts to new data requests as the user selects different companies.

When participants navigate to `/dashboard/transactions`, they encounter a form built with shadcn/ui input components. A dropdown lists available companies and two number fields accept buy or sell quantities. Client-side logic immediately calculates and displays the total trade value. Clicking the “Transact” button sends a POST request to `/api/transactions`, where middleware checks the user’s session, enforces IP whitelist rules, and processes the transaction. A success response triggers a toast notification and refreshes both the Transactions page and the Portfolio page data.

The Portfolio view at `/dashboard/portfolio` shows current holdings in a tailwind-styled table. Each row displays ticker symbols, share quantities, average cost, current price, and unrealized profit or loss. SWR ensures this data stays current whenever the user revisits or triggers a manual refresh.

Administrators manage the entire system through their admin panel. Visiting `/admin/participants` displays a table of registered users with options to add, edit, or deactivate participants. Clicking “Import CSV” opens a modal that accepts an Excel or CSV file. The file is posted to `/api/admin/participants/import` and parsed with Formidable and xlsx to bulk-create user accounts. Admins can also go to `/admin/companies` to add new companies or edit existing ones, filling out fields like name, ticker, and description, then posting to `/api/admin/companies`. The news section at `/admin/news` works similarly, with modals for creating, editing, and deleting news articles. Finally, `/admin/transactions` shows all trades across the platform, allowing exports or manual adjustments.

The OBS overlay feature is accessible at `/obs`. When a streaming overlay connects to this route, it opens a continuous SSE connection that broadcasts live events such as new transactions, start-of-day bells, or end-of-day bells. The page renders these events in a lightweight transparent interface optimized for screen capture.

## Settings and Account Management
Participants and admins alike access account settings via the “Settings” link in the sidebar. On the Settings page, users see a profile form with fields for display name and contact email accompanied by a change-password section. Submitting updated information calls `/api/user/update-profile`, while changing the password issues a request to `/api/user/change-password`, both returning success or error messages inline. Notification preferences—such as email alerts for large transactions or daily summaries—are toggled on this page and saved via `/api/user/preferences`. After saving, the user clicks a “Back to Dashboard” link or uses the sidebar to continue normal workflows.

## Error States and Alternate Paths
Form validation errors appear inline beneath the related field, explaining the issue in clear language, such as “Password must be at least 8 characters.” If a network interruption occurs, a banner appears at the top of the screen reading “You are offline. Some data may be outdated,” and retry buttons appear on actionable items. Attempting to access an admin page while signed in as a participant redirects the user to a custom 403 error page informing them they lack permission. Requests from unauthorized IP addresses receive a similar 403 response and are shown a message stating “Access restricted from your network.” In each case, the user can follow a link to return to a safe page or retry after correcting the issue.

## Conclusion and Overall App Journey
From first landing on the welcome screen, users create an account or sign in, then step directly into a role-based experience. Participants explore news, execute trades, and review their portfolios, while admins set up system data, onboard new users, and monitor transactions. Real-time updates power the OBS overlay for live streaming contexts. Throughout, consistent header and sidebar navigation keep the experience fluid, and clear error handling guides the user back on track when issues arise. Whether managing a trade or publishing a news item, the journey flows from sign-up to sign-out with every feature connected in an intuitive, end-to-end fashion.